import FormExtensionAbility from '@ohos.app.form.FormExtensionAbility';
import formProvider from '@ohos.app.form.formProvider';
import formInfo from '@ohos.app.form.formInfo';
import formBindingData from '@ohos.app.form.formBindingData';
import { Want } from '@kit.AbilityKit';

/**
 * å¡ç‰‡æ•°æ®æ¥å£
 */
interface FormData {
  title: string;
  icon: string;
}

/**
 * æ¸¸æˆä¸­å¿ƒå¡ç‰‡æœåŠ¡
 */
export default class GameCatalogFormAbility extends FormExtensionAbility {
  onAddForm(want: Want): formBindingData.FormBindingData {
    // åˆ›å»ºå¡ç‰‡æ—¶è°ƒç”¨
    console.info('GameCatalogFormAbility onAddForm');

    let formData: FormData = {
      title: 'æ¸¸æˆä¸­å¿ƒ',
      icon: 'ğŸ®'
    };

    return formBindingData.createFormBindingData(formData);
  }

  onUpdateForm(formId: string): void {
    // æ›´æ–°å¡ç‰‡æ—¶è°ƒç”¨
    console.info('GameCatalogFormAbility onUpdateForm');

    let formData: FormData = {
      title: 'æ¸¸æˆä¸­å¿ƒ',
      icon: 'ğŸ®'
    };

    let formBindingDataObj = formBindingData.createFormBindingData(formData);
    formProvider.updateForm(formId, formBindingDataObj).catch((err: Error) => {
      console.error('Failed to update form:', err.message);
    });
  }

  onRemoveForm(formId: string): void {
    // åˆ é™¤å¡ç‰‡æ—¶è°ƒç”¨
    console.info('GameCatalogFormAbility onRemoveForm');
  }

  onFormEvent(formId: string, message: string): void {
    // å¡ç‰‡äº‹ä»¶å¤„ç†
    console.info('GameCatalogFormAbility onFormEvent: ' + message);
  }
}
